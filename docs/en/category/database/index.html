<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>database | Alexey Evseev</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="database" />
<meta name="author" content="Alexey Evseev" />
<meta property="og:locale" content="en" />
<link rel="canonical" href="https://st4lk.github.io/en/category/database/" />
<meta property="og:url" content="https://st4lk.github.io/en/category/database/" />
<meta property="og:site_name" content="Alexey Evseev" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="database" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Alexey Evseev"},"headline":"database","url":"https://st4lk.github.io/en/category/database/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="/en/assets/main.css">
  <link rel="stylesheet" href="/en/assets/css/styles.css"><link type="application/atom+xml" rel="alternate" href="https://st4lk.github.io/en/feed.xml" title="Alexey Evseev" /><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8ZHLL9G1CF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8ZHLL9G1CF');
</script>
<link rel="alternate" hreflang="ru" href="https://st4lk.github.io/category/database/" />

  <link rel="alternate" hreflang="en" href="https://st4lk.github.io/en/category/database/" />

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/en/">Alexey Evseev</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/en/blog/">Blog</a>
          <a class="page-link" href="/en/contact/">Contact</a>
          <a class="page-link" style="margin-right: 0px" href="/category/database/" ><img src="/en/assets/images/ru.png" /></a>
          <a class="page-link" href="/en/category/database/" ><img src="/en/assets/images/en.png" /></a>
          <a class="page-link" href="/en/search/" ><img src="/en/assets/images/search.svg" /></a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        

  <!-- Pagination is active -->
  

  
    <!-- No page number if we only have a single page -->
    <h1>Category index for &ldquo;database&rdquo;</h1>
  

  <div class="home">
    <ul class="post-list"><li><span class="post-meta">Jan 14, 2017</span>
    <h3>
      <a class="post-link" href="/en/blog/2017/01/14/count-filtered-related-objects-django.html">
        Trap in counting related objects in Django
      </a>
    </h3><p><a href="/en/blog/2017/01/14/count-filtered-related-objects-django.html"><img src="https://img-fotki.yandex.ru/get/172931/85893628.c6b/0_1f68eb_c4171bf7_L.png" alt="Trap in counting related objects in Django" title="Trap in counting related objects in Django" /></a></p>

<p>Task: for every object count number of related objects satisfying some conditions.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2017/01/14/count-filtered-related-objects-django.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2017/01/14/count-filtered-related-objects-django.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2017/01/14/count-filtered-related-objects-django.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Sep 30, 2015</span>
    <h3>
      <a class="post-link" href="/en/blog/2015/09/30/trying-json-combo-django-and-postgresql.html">
        Trying JSON in Django and PostgreSQL (and compare with MongoDB)
      </a>
    </h3><p><a href="/en/blog/2015/09/30/trying-json-combo-django-and-postgresql.html"><img src="https://img-fotki.yandex.ru/get/3706/85893628.c69/0_19430e_cafd0257_XL.png" alt="Trying JSON in Django and PostgreSQL" title="Trying JSON in Django and PostgreSQL" /></a></p>

<p>New <a href="https://docs.djangoproject.com/en/1.9/ref/contrib/postgres/fields/#jsonfield">JSONField</a> will be added in Django 1.9, it can be used with PostgreSQL &gt;= 9.4. Let’s try to work with it and find out, in what situations it can be useful.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2015/09/30/trying-json-combo-django-and-postgresql.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2015/09/30/trying-json-combo-django-and-postgresql.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2015/09/30/trying-json-combo-django-and-postgresql.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Mar 4, 2015</span>
    <h3>
      <a class="post-link" href="/en/blog/2015/03/04/debug-sql-django-test.html">
        Debug SQL in django test
      </a>
    </h3><p><a href="/en/blog/2015/03/04/debug-sql-django-test.html"><img src="https://img-fotki.yandex.ru/get/4517/85893628.c67/0_1795f5_a958c090_orig.png" alt="Debug SQL in django test" title="Debug SQL in django test" /></a></p>

<p>In django tests we can measure number of sql queries:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">assertNumQueries</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</code></pre></div></div>

<p>If code in context of <code class="language-plaintext highlighter-rouge">assertNumQueries</code> will make other number of DB attempts than expected (here 1), test will throw error. But when test fails it is sometimes hard to understand, what unexpected query was made. To debug such case very useful to log SQL expressions to console. Below is description how to do it.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2015/03/04/debug-sql-django-test.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2015/03/04/debug-sql-django-test.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2015/03/04/debug-sql-django-test.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Jan 18, 2015</span>
    <h3>
      <a class="post-link" href="/en/blog/2015/01/18/timestamp-objectid-mongodb.html">
        Timestamp and ObjectId in mongoDB
      </a>
    </h3><p><a href="/en/blog/2015/01/18/timestamp-objectid-mongodb.html"><img src="https://img-fotki.yandex.ru/get/17859/85893628.c67/0_16f717_c4a5da7b_orig.png" alt="Timestamp and ObjectId in mongoDB" title="Timestamp and ObjectId in mongoDB" /></a></p>

<p>Every record in mongoDB has field <code class="language-plaintext highlighter-rouge">_id</code>, that must be unique inside collection.
By default type of this field is <a href="http://docs.mongodb.org/manual/reference/object-id/">ObjectId</a>,
and it is assigned automatically if field is not set.</p>

<p>Lets look at ObjectId more carefully.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2015/01/18/timestamp-objectid-mongodb.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2015/01/18/timestamp-objectid-mongodb.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2015/01/18/timestamp-objectid-mongodb.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Sep 9, 2014</span>
    <h3>
      <a class="post-link" href="/en/blog/2014/09/09/nested-sql-queries-django.html">
        Nested SQL queries in Django
      </a>
    </h3><p><a href="/en/blog/2014/09/09/nested-sql-queries-django.html"><img src="/assets/images/posts/2014-09-09-nested-sql-queries-django/Kenguru-origami-za-shemoj-Stephen-Weiss.jpeg" alt="Nested SQL queries in Django" title="Nested SQL queries in Django" /></a></p>

<p>Did you know, that Django ORM can do <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#in">nested SQL queries</a>? Shame on me, but i’ve found it not so long ago.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2014/09/09/nested-sql-queries-django.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2014/09/09/nested-sql-queries-django.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2014/09/09/nested-sql-queries-django.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Mar 7, 2014</span>
    <h3>
      <a class="post-link" href="/en/blog/2014/03/07/mongodb-indexes.html">
        What you should know about mongodb indexes
      </a>
    </h3><p><a href="/en/blog/2014/03/07/mongodb-indexes.html"><img src="/assets/images/posts/2014-03-07-mongodb-indexes/mongoDB-logo_small.png" alt="What it is needed to know about mongodb indexes" title="What it is needed to know about mongodb indexes" /></a></p>

<p>Recently i’ve completed course “M101P: MongoDB for Developers” (periodically repeats, <a href="https://education.mongodb.com/courses/10gen/M101P/2014_April/about">next</a> starts at April).
During this course i’ve found to myself interesting features of mongodb.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2014/03/07/mongodb-indexes.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2014/03/07/mongodb-indexes.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2014/03/07/mongodb-indexes.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Jul 11, 2013</span>
    <h3>
      <a class="post-link" href="/en/blog/2013/07/11/django-querysetcount-cache.html">
        Django queryset.count cache
      </a>
    </h3><p><a href="/en/blog/2013/07/11/django-querysetcount-cache.html"><img src="/assets/images/posts/2013-07-11-django-querysetcount-cache/to-count-22117_small.jpeg" alt="Django queryset.count cache" title="Django queryset.count cache" /></a></p>

<p>Once I mentioned, that my django application makes several similiar queries like <code class="language-plaintext highlighter-rouge">SELECT COUNT(*) ...</code>. As it turns out (for me it was surprise), <code class="language-plaintext highlighter-rouge">queryset.count()</code> has not obvious cache. But let me start the story from the beginning (and sorry for my english :) ).</p>

<div class="post-list-buttons">
      <a href="/en/blog/2013/07/11/django-querysetcount-cache.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2013/07/11/django-querysetcount-cache.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2013/07/11/django-querysetcount-cache.html">Read More</a>
    </div>
  </li><li><span class="post-meta">Apr 12, 2013</span>
    <h3>
      <a class="post-link" href="/en/blog/2013/04/12/django-admin-site-optimisation.html">
        Django admin site optimisation
      </a>
    </h3><p><a href="/en/blog/2013/04/12/django-admin-site-optimisation.html"><img src="/assets/images/posts/2013-04-12-django-admin-site-optimisation/django-admin-performance.png" alt="Django admin site optimisation" title="Django admin site optimisation" /></a></p>

<p>It is known, that less amount of database attempts leads to better performance. Usually admin page - part of site with low traffic, but anyway it is good, if no additional database calls happen there. It is more pleasant to use it, because page renders faster and also frees server resources.</p>

<p>In this post i’ll try to reduce some database attempts in admin page, when model method <code class="language-plaintext highlighter-rouge">__unicode__</code> contains related object field. I suppose, that examples describe the situation more clear.</p>

<div class="post-list-buttons">
      <a href="/en/blog/2013/04/12/django-admin-site-optimisation.html#disqus_thread" data-disqus-identifier="https://st4lk.github.io/blog/2013/04/12/django-admin-site-optimisation.html">
        Comments
      </a>
      <a style="margin-left: 5px;" href="/en/blog/2013/04/12/django-admin-site-optimisation.html">Read More</a>
    </div>
  </li></ul>
</div>
  <nav><p><!-- Pagination links -->
<!-- pagination (a page1 folder isn't created by Jekyll.
To avoid 404s when going to the first page it must be
specified separately) -->

<div class="pagination">
  <ul>
    
      <li class="disabled">
        <a href="#">&laquo;</a>
      </li>
    
    
      <li class="active">
        <a href="#">1</a>
      </li>
    
    
    
      <li class="disabled">
        <a href="#">&raquo;</a>
      </li>
    
  </ul>
</div>
</p></nav>



      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/en/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name"></li><li><a class="u-email" href="mailto:alexevseev@gmail.com">alexevseev@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"></div>

    </div>

  </div>

</footer>
<script id="dsq-count-scr" src="//lexev-dev.disqus.com/count.js" async></script></body>

</html>
